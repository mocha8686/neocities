---
import type { ImageMetadata } from 'astro';
import type { HTMLAttributes } from 'astro/types';
import { Image } from 'astro:assets';

interface OtherProps {
	image: ImageMetadata;
	alt?: string;
	href: string;
	title: string;
	artist: string;
}

type Props = OtherProps & HTMLAttributes<'a'>

const { image, alt, href, title, artist, ...props } = Astro.props;

const size = 16 * 6;
---

<a {href} target="_blank" rel="noreferrer" {...props}>
	<h3>{title}</h3>
	<p>{artist}</p>
	<Image
		src={image}
		alt={alt ?? `Cover art of ${title}`}
		width={size}
		height={size}
		class="cover"
	/>
</a>

<style>
	a {
		display: grid;
		grid-template:
			'cover' 1fr
			'title' max-content
			'artist' max-content / max-content;
		color: inherit;
		text-decoration: none;
	}

	h3 {
		grid-area: title;
		font-size: 0.8rem;
	}

	p {
		grid-area: artist;
		font-size: 0.75rem;
	}

	h3,
	p {
		margin: 0;
		text-align: right;
	}

	.cover {
		grid-area: cover;
	}
</style>
